<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="OSDU Fork Management Template - Simplified enterprise-grade fork management with AI-enhanced workflows"><meta name=author content="Daniel Scholl"><link href=https://danielscholl-osdu.github.io/osdu-fork-template/decisions/adr_013_reusable_actions/ rel=canonical><link rel=icon href=../../images/favicon.ico><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.15"><title>ADR-013: Reusable GitHub Actions Pattern for PR Creation - OSDU SPI Fork</title><link rel=stylesheet href=../../assets/stylesheets/main.342714a4.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CFira+Code:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Inter";--md-code-font:"Fira Code"}</style><link rel=stylesheet href=../../stylesheets/extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#adr-013-reusable-github-actions-pattern-for-pr-creation class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="OSDU SPI Fork" class="md-header__button md-logo" aria-label="OSDU SPI Fork" data-md-component=logo> <img src=../../images/favicon.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> OSDU SPI Fork </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> ADR-013: Reusable GitHub Actions Pattern for PR Creation </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media=(prefers-color-scheme) data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=custom data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=custom data-md-color-accent=indigo aria-label="Switch to system preference" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to system preference" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5M7 15a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/danielscholl-osdu/osdu-fork-template title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> osdu-fork-template </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../concepts/ class=md-tabs__link> Concepts </a> </li> <li class=md-tabs__item> <a href=../../architecture/overview/ class=md-tabs__link> Architecture </a> </li> <li class=md-tabs__item> <a href=../../workflows/initialization/ class=md-tabs__link> Workflows </a> </li> <li class=md-tabs__item> <a href=../ class=md-tabs__link> Decisions </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="OSDU SPI Fork" class="md-nav__button md-logo" aria-label="OSDU SPI Fork" data-md-component=logo> <img src=../../images/favicon.png alt=logo> </a> OSDU SPI Fork </label> <div class=md-nav__source> <a href=https://github.com/danielscholl-osdu/osdu-fork-template title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> osdu-fork-template </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-nav__item> <a href=../../concepts/ class=md-nav__link> <span class=md-ellipsis> Concepts </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Architecture </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Architecture </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../architecture/overview/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/three_branch_strategy/ class=md-nav__link> <span class=md-ellipsis> Three-Branch Strategy </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/workflow_system/ class=md-nav__link> <span class=md-ellipsis> Workflow System </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/ai_integration/ class=md-nav__link> <span class=md-ellipsis> AI Integration </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> Workflows </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Workflows </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../workflows/initialization/ class=md-nav__link> <span class=md-ellipsis> Initialization </span> </a> </li> <li class=md-nav__item> <a href=../../workflows/synchronization/ class=md-nav__link> <span class=md-ellipsis> Synchronization </span> </a> </li> <li class=md-nav__item> <a href=../../workflows/cascade/ class=md-nav__link> <span class=md-ellipsis> Cascade </span> </a> </li> <li class=md-nav__item> <a href=../../workflows/validation/ class=md-nav__link> <span class=md-ellipsis> Validation </span> </a> </li> <li class=md-nav__item> <a href=../../workflows/build/ class=md-nav__link> <span class=md-ellipsis> Build </span> </a> </li> <li class=md-nav__item> <a href=../../workflows/release/ class=md-nav__link> <span class=md-ellipsis> Release </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Decisions </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Decisions </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ class=md-nav__link> <span class=md-ellipsis> Index </span> </a> </li> <li class=md-nav__item> <a href=../evolution/ class=md-nav__link> <span class=md-ellipsis> Evolution </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#problem-statement class=md-nav__link> <span class=md-ellipsis> Problem Statement </span> </a> </li> <li class=md-nav__item> <a href=#context-and-requirements class=md-nav__link> <span class=md-ellipsis> Context and Requirements </span> </a> <nav class=md-nav aria-label="Context and Requirements"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#code-duplication-and-maintenance-issues class=md-nav__link> <span class=md-ellipsis> Code Duplication and Maintenance Issues </span> </a> </li> <li class=md-nav__item> <a href=#reusable-pattern-requirements class=md-nav__link> <span class=md-ellipsis> Reusable Pattern Requirements </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#decision class=md-nav__link> <span class=md-ellipsis> Decision </span> </a> <nav class=md-nav aria-label=Decision> <ul class=md-nav__list> <li class=md-nav__item> <a href=#material-package-custom-composite-action-architecture class=md-nav__link> <span class=md-ellipsis> :material-package Custom Composite Action Architecture </span> </a> <nav class=md-nav aria-label=":material-package Custom Composite Action Architecture"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#centralized-implementation-githubactionscreate-enhanced-practionyml class=md-nav__link> <span class=md-ellipsis> Centralized Implementation (.github/actions/create-enhanced-pr/action.yml) </span> </a> </li> <li class=md-nav__item> <a href=#comprehensive-input-interface class=md-nav__link> <span class=md-ellipsis> Comprehensive Input Interface </span> </a> </li> <li class=md-nav__item> <a href=#standardized-output-interface class=md-nav__link> <span class=md-ellipsis> Standardized Output Interface </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#material-artificial-intelligence-ai-enhancement-pipeline class=md-nav__link> <span class=md-ellipsis> :material-artificial-intelligence AI Enhancement Pipeline </span> </a> <nav class=md-nav aria-label=":material-artificial-intelligence AI Enhancement Pipeline"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#multi-provider-llm-detection class=md-nav__link> <span class=md-ellipsis> Multi-Provider LLM Detection </span> </a> </li> <li class=md-nav__item> <a href=#content-generation-strategy class=md-nav__link> <span class=md-ellipsis> Content Generation Strategy </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#implementation-strategy class=md-nav__link> <span class=md-ellipsis> Implementation Strategy </span> </a> <nav class=md-nav aria-label="Implementation Strategy"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#material-workflow-usage-patterns-and-limitations class=md-nav__link> <span class=md-ellipsis> :material-workflow Usage Patterns and Limitations </span> </a> <nav class=md-nav aria-label=":material-workflow Usage Patterns and Limitations"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#main-branch-workflows-can-use-action class=md-nav__link> <span class=md-ellipsis> Main Branch Workflows (Can Use Action) </span> </a> </li> <li class=md-nav__item> <a href=#branch-limitation-handling class=md-nav__link> <span class=md-ellipsis> Branch Limitation Handling </span> </a> </li> <li class=md-nav__item> <a href=#sync-workflow-embedded-logic class=md-nav__link> <span class=md-ellipsis> Sync Workflow Embedded Logic </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#material-shield-check-error-handling-and-reliability class=md-nav__link> <span class=md-ellipsis> :material-shield-check Error Handling and Reliability </span> </a> <nav class=md-nav aria-label=":material-shield-check Error Handling and Reliability"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#graceful-degradation-framework class=md-nav__link> <span class=md-ellipsis> Graceful Degradation Framework </span> </a> </li> <li class=md-nav__item> <a href=#comprehensive-logging-and-debugging class=md-nav__link> <span class=md-ellipsis> Comprehensive Logging and Debugging </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#benefits-and-rationale class=md-nav__link> <span class=md-ellipsis> Benefits and Rationale </span> </a> <nav class=md-nav aria-label="Benefits and Rationale"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#material-trending-up-strategic-advantages class=md-nav__link> <span class=md-ellipsis> :material-trending-up Strategic Advantages </span> </a> <nav class=md-nav aria-label=":material-trending-up Strategic Advantages"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#code-duplication-elimination class=md-nav__link> <span class=md-ellipsis> Code Duplication Elimination </span> </a> </li> <li class=md-nav__item> <a href=#enhanced-maintainability-and-consistency class=md-nav__link> <span class=md-ellipsis> Enhanced Maintainability and Consistency </span> </a> </li> <li class=md-nav__item> <a href=#development-experience-improvement class=md-nav__link> <span class=md-ellipsis> Development Experience Improvement </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#material-cog-outline-operational-benefits class=md-nav__link> <span class=md-ellipsis> :material-cog-outline Operational Benefits </span> </a> <nav class=md-nav aria-label=":material-cog-outline Operational Benefits"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#ai-integration-excellence class=md-nav__link> <span class=md-ellipsis> AI Integration Excellence </span> </a> </li> <li class=md-nav__item> <a href=#workflow-simplification class=md-nav__link> <span class=md-ellipsis> Workflow Simplification </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#alternative-approaches-considered class=md-nav__link> <span class=md-ellipsis> Alternative Approaches Considered </span> </a> <nav class=md-nav aria-label="Alternative Approaches Considered"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#shared-shell-functions class=md-nav__link> <span class=md-ellipsis> Shared Shell Functions </span> </a> </li> <li class=md-nav__item> <a href=#external-action-from-github-marketplace class=md-nav__link> <span class=md-ellipsis> External Action from GitHub Marketplace </span> </a> </li> <li class=md-nav__item> <a href=#copy-paste-with-documentation class=md-nav__link> <span class=md-ellipsis> Copy-Paste with Documentation </span> </a> </li> <li class=md-nav__item> <a href=#npm-package-for-pr-creation class=md-nav__link> <span class=md-ellipsis> NPM Package for PR Creation </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#consequences-and-trade-offs class=md-nav__link> <span class=md-ellipsis> Consequences and Trade-offs </span> </a> <nav class=md-nav aria-label="Consequences and Trade-offs"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#positive-outcomes class=md-nav__link> <span class=md-ellipsis> Positive Outcomes </span> </a> <nav class=md-nav aria-label="Positive Outcomes"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#maintenance-and-consistency-excellence class=md-nav__link> <span class=md-ellipsis> Maintenance and Consistency Excellence </span> </a> </li> <li class=md-nav__item> <a href=#enhanced-development-experience class=md-nav__link> <span class=md-ellipsis> Enhanced Development Experience </span> </a> </li> <li class=md-nav__item> <a href=#ai-integration-and-reliability class=md-nav__link> <span class=md-ellipsis> AI Integration and Reliability </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#trade-offs-and-limitations class=md-nav__link> <span class=md-ellipsis> Trade-offs and Limitations </span> </a> <nav class=md-nav aria-label="Trade-offs and Limitations"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#abstraction-and-complexity class=md-nav__link> <span class=md-ellipsis> Abstraction and Complexity </span> </a> </li> <li class=md-nav__item> <a href=#branch-dependency-limitations class=md-nav__link> <span class=md-ellipsis> Branch Dependency Limitations </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#success-metrics class=md-nav__link> <span class=md-ellipsis> Success Metrics </span> </a> <nav class=md-nav aria-label="Success Metrics"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#quantitative-indicators class=md-nav__link> <span class=md-ellipsis> Quantitative Indicators </span> </a> </li> <li class=md-nav__item> <a href=#qualitative-indicators class=md-nav__link> <span class=md-ellipsis> Qualitative Indicators </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#integration-points class=md-nav__link> <span class=md-ellipsis> Integration Points </span> </a> <nav class=md-nav aria-label="Integration Points"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#material-source-branch-template-and-workflow-integration class=md-nav__link> <span class=md-ellipsis> :material-source-branch Template and Workflow Integration </span> </a> <nav class=md-nav aria-label=":material-source-branch Template and Workflow Integration"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#template-update-propagation-per-adr-012 class=md-nav__link> <span class=md-ellipsis> Template Update Propagation (per ADR-012) </span> </a> </li> <li class=md-nav__item> <a href=#ai-enhanced-development-per-adr-014 class=md-nav__link> <span class=md-ellipsis> AI-Enhanced Development (per ADR-014) </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#material-quality-assurance-quality-and-testing-integration class=md-nav__link> <span class=md-ellipsis> :material-quality-assurance Quality and Testing Integration </span> </a> <nav class=md-nav aria-label=":material-quality-assurance Quality and Testing Integration"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#workflow-simplification_1 class=md-nav__link> <span class=md-ellipsis> Workflow Simplification </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#related-decisions class=md-nav__link> <span class=md-ellipsis> Related Decisions </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=adr-013-reusable-github-actions-pattern-for-pr-creation>ADR-013: Reusable GitHub Actions Pattern for PR Creation</h1> <p><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.62L12 2 9.19 8.62 2 9.24l5.45 4.73L5.82 21z"/></svg></span> <strong>Critical Decision</strong> | <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 19H5V8h14m-3-7v2H8V1H6v2H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-1V1m-1 11h-5v5h5z"/></svg></span> <strong>2025-06-04</strong> | <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"/></svg></span> <strong>Accepted</strong></p> <h2 id=problem-statement>Problem Statement</h2> <p>During template synchronization workflow implementation, significant code duplication was identified in PR creation logic across multiple workflows. Each workflow requiring pull request creation had to implement identical functionality for LLM detection, AI-enhanced description generation, fallback handling, and GitHub API integration, creating maintenance burden and consistency risks.</p> <h2 id=context-and-requirements>Context and Requirements</h2> <h3 id=code-duplication-and-maintenance-issues><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 13h-2V7h2m0 10h-2v-2h2M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2"/></svg></span> Code Duplication and Maintenance Issues</h3> <p><strong>Duplicated PR Creation Components</strong>: - LLM detection logic checking for available API keys (Anthropic, Azure OpenAI, OpenAI) - aipr integration for generating AI-enhanced PR descriptions with multiple provider support - Fallback handling when AI generation fails or API keys are unavailable - Diff size management to avoid token limits with large changes - GitHub PR creation with proper parameters and error handling - Output management returning PR URLs and numbers for workflow coordination</p> <p><strong>Affected Workflows with Similar Requirements</strong>: <div class="language-yaml highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nt>affected_workflows</span><span class=p>:</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a><span class=w>  </span><span class=nt>sync_workflow</span><span class=p>:</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=w>    </span><span class=nt>purpose</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Creates</span><span class=nv> </span><span class=s>upstream</span><span class=nv> </span><span class=s>synchronization</span><span class=nv> </span><span class=s>PRs</span><span class=nv> </span><span class=s>with</span><span class=nv> </span><span class=s>vulnerability</span><span class=nv> </span><span class=s>analysis&quot;</span>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=w>    </span><span class=nt>complexity</span><span class=p>:</span><span class=w> </span><span class=s>&quot;80+</span><span class=nv> </span><span class=s>lines</span><span class=nv> </span><span class=s>of</span><span class=nv> </span><span class=s>PR</span><span class=nv> </span><span class=s>creation</span><span class=nv> </span><span class=s>logic</span><span class=nv> </span><span class=s>with</span><span class=nv> </span><span class=s>AI</span><span class=nv> </span><span class=s>enhancement&quot;</span>
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a>
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a><span class=w>  </span><span class=nt>template_sync_workflow</span><span class=p>:</span>
</span><span id=__span-0-7><a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a><span class=w>    </span><span class=nt>purpose</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Creates</span><span class=nv> </span><span class=s>template</span><span class=nv> </span><span class=s>update</span><span class=nv> </span><span class=s>PRs</span><span class=nv> </span><span class=s>with</span><span class=nv> </span><span class=s>change</span><span class=nv> </span><span class=s>summaries&quot;</span>
</span><span id=__span-0-8><a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a><span class=w>    </span><span class=nt>complexity</span><span class=p>:</span><span class=w> </span><span class=s>&quot;75+</span><span class=nv> </span><span class=s>lines</span><span class=nv> </span><span class=s>of</span><span class=nv> </span><span class=s>similar</span><span class=nv> </span><span class=s>PR</span><span class=nv> </span><span class=s>creation</span><span class=nv> </span><span class=s>logic&quot;</span>
</span><span id=__span-0-9><a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a>
</span><span id=__span-0-10><a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a><span class=w>  </span><span class=nt>future_workflows</span><span class=p>:</span>
</span><span id=__span-0-11><a id=__codelineno-0-11 name=__codelineno-0-11 href=#__codelineno-0-11></a><span class=w>    </span><span class=nt>purpose</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Additional</span><span class=nv> </span><span class=s>automation</span><span class=nv> </span><span class=s>requiring</span><span class=nv> </span><span class=s>AI-enhanced</span><span class=nv> </span><span class=s>PR</span><span class=nv> </span><span class=s>descriptions&quot;</span>
</span><span id=__span-0-12><a id=__codelineno-0-12 name=__codelineno-0-12 href=#__codelineno-0-12></a><span class=w>    </span><span class=nt>complexity</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Would</span><span class=nv> </span><span class=s>require</span><span class=nv> </span><span class=s>duplicating</span><span class=nv> </span><span class=s>existing</span><span class=nv> </span><span class=s>patterns&quot;</span>
</span></code></pre></div></p> <p><strong>Problems with Current Approach</strong>: - Maintenance burden: changes to PR creation logic required updates in multiple locations - Inconsistency risk: implementations could drift apart over time without coordination - Testing complexity: each workflow implementation needed separate testing and validation - Feature lag: improvements to one workflow didn't automatically benefit others</p> <h3 id=reusable-pattern-requirements><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M11 2v2.07A8 8 0 0 0 4.07 11H2v2h2.07A8 8 0 0 0 11 19.93V22h2v-2.07A8 8 0 0 0 19.93 13H22v-2h-2.07A8 8 0 0 0 13 4.07V2m-2 4.08V8h2V6.09c2.5.41 4.5 2.41 4.92 4.91H16v2h1.91c-.41 2.5-2.41 4.5-4.91 4.92V16h-2v1.91C8.5 17.5 6.5 15.5 6.08 13H8v-2H6.09C6.5 8.5 8.5 6.5 11 6.08M12 11a1 1 0 0 0-1 1 1 1 0 0 0 1 1 1 1 0 0 0 1-1 1 1 0 0 0-1-1"/></svg></span> Reusable Pattern Requirements</h3> <p><strong>Centralized Logic</strong>: Single implementation of PR creation with AI enhancement to eliminate duplication.</p> <p><strong>Configurable Interface</strong>: Flexible parameters supporting different use cases while maintaining consistency.</p> <p><strong>AI Integration</strong>: Built-in aipr integration with multiple LLM providers and intelligent fallback handling.</p> <h2 id=decision>Decision</h2> <p>Implement <strong>Reusable GitHub Actions Pattern</strong> through custom composite action for common PR creation functionality:</p> <pre class=mermaid><code>graph TD
    A[Workflow Needs PR] --&gt; B[Uses Composite Action]
    B --&gt; C[Detect Available LLM]
    C --&gt; D{LLM Available?}
    D --&gt;|Yes| E[Generate AI Description]
    D --&gt;|No| F[Use Fallback Description]
    E --&gt; G{AI Generation Success?}
    G --&gt;|Yes| H[Use AI Description]
    G --&gt;|No| F
    F --&gt; I[Create GitHub PR]
    H --&gt; I
    I --&gt; J[Return PR URL &amp; Number]

    K[Branch Limitation] --&gt; L{Running from main?}
    L --&gt;|Yes| M[Can Use Action]
    L --&gt;|No| N[Must Embed Logic]

    style A fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    style E fill:#e8f5e9,stroke:#1b5e20,stroke-width:2px
    style F fill:#fff3e0,stroke:#e65100,stroke-width:2px
    style N fill:#fce4ec,stroke:#c2185b,stroke-width:2px</code></pre> <h3 id=material-package-custom-composite-action-architecture>:material-package Custom Composite Action Architecture</h3> <h4 id=centralized-implementation-githubactionscreate-enhanced-practionyml><strong>Centralized Implementation (.github/actions/create-enhanced-pr/action.yml)</strong></h4> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=c1># Comprehensive composite action structure</span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=nt>composite_action</span><span class=p>:</span>
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Create</span><span class=nv> </span><span class=s>Enhanced</span><span class=nv> </span><span class=s>PR&quot;</span>
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a><span class=w>  </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Creates</span><span class=nv> </span><span class=s>GitHub</span><span class=nv> </span><span class=s>PR</span><span class=nv> </span><span class=s>with</span><span class=nv> </span><span class=s>AI-enhanced</span><span class=nv> </span><span class=s>descriptions</span><span class=nv> </span><span class=s>using</span><span class=nv> </span><span class=s>multiple</span><span class=nv> </span><span class=s>LLM</span><span class=nv> </span><span class=s>providers&quot;</span>
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a>
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a><span class=w>  </span><span class=nt>runs</span><span class=p>:</span>
</span><span id=__span-1-7><a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a><span class=w>    </span><span class=nt>using</span><span class=p>:</span><span class=w> </span><span class=s>&#39;composite&#39;</span>
</span><span id=__span-1-8><a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a><span class=w>    </span><span class=nt>steps</span><span class=p>:</span>
</span><span id=__span-1-9><a id=__codelineno-1-9 name=__codelineno-1-9 href=#__codelineno-1-9></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Detect available LLM provider</span>
</span><span id=__span-1-10><a id=__codelineno-1-10 name=__codelineno-1-10 href=#__codelineno-1-10></a><span class=w>        </span><span class=nt>shell</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">bash</span>
</span><span id=__span-1-11><a id=__codelineno-1-11 name=__codelineno-1-11 href=#__codelineno-1-11></a><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|</span>
</span><span id=__span-1-12><a id=__codelineno-1-12 name=__codelineno-1-12 href=#__codelineno-1-12></a><span class=w>          </span><span class=no># Priority order: Anthropic → Azure OpenAI → OpenAI → Fallback</span>
</span><span id=__span-1-13><a id=__codelineno-1-13 name=__codelineno-1-13 href=#__codelineno-1-13></a><span class=w>          </span><span class=no>if [ -n &quot;${{ inputs.anthropic-api-key }}&quot; ]; then</span>
</span><span id=__span-1-14><a id=__codelineno-1-14 name=__codelineno-1-14 href=#__codelineno-1-14></a><span class=w>            </span><span class=no>echo &quot;provider=anthropic&quot; &gt;&gt; $GITHUB_OUTPUT</span>
</span><span id=__span-1-15><a id=__codelineno-1-15 name=__codelineno-1-15 href=#__codelineno-1-15></a><span class=w>            </span><span class=no>echo &quot;model=claude-4&quot; &gt;&gt; $GITHUB_OUTPUT</span>
</span><span id=__span-1-16><a id=__codelineno-1-16 name=__codelineno-1-16 href=#__codelineno-1-16></a><span class=w>          </span><span class=no>elif [ -n &quot;${{ inputs.azure-api-key }}&quot; ] &amp;&amp; [ -n &quot;${{ inputs.azure-api-base }}&quot; ]; then</span>
</span><span id=__span-1-17><a id=__codelineno-1-17 name=__codelineno-1-17 href=#__codelineno-1-17></a><span class=w>            </span><span class=no>echo &quot;provider=azure&quot; &gt;&gt; $GITHUB_OUTPUT</span>
</span><span id=__span-1-18><a id=__codelineno-1-18 name=__codelineno-1-18 href=#__codelineno-1-18></a><span class=w>            </span><span class=no>echo &quot;model=azure/gpt-4o&quot; &gt;&gt; $GITHUB_OUTPUT</span>
</span><span id=__span-1-19><a id=__codelineno-1-19 name=__codelineno-1-19 href=#__codelineno-1-19></a><span class=w>          </span><span class=no>elif [ -n &quot;${{ inputs.openai-api-key }}&quot; ]; then</span>
</span><span id=__span-1-20><a id=__codelineno-1-20 name=__codelineno-1-20 href=#__codelineno-1-20></a><span class=w>            </span><span class=no>echo &quot;provider=openai&quot; &gt;&gt; $GITHUB_OUTPUT</span>
</span><span id=__span-1-21><a id=__codelineno-1-21 name=__codelineno-1-21 href=#__codelineno-1-21></a><span class=w>            </span><span class=no>echo &quot;model=gpt-4.1&quot; &gt;&gt; $GITHUB_OUTPUT</span>
</span><span id=__span-1-22><a id=__codelineno-1-22 name=__codelineno-1-22 href=#__codelineno-1-22></a><span class=w>          </span><span class=no>else</span>
</span><span id=__span-1-23><a id=__codelineno-1-23 name=__codelineno-1-23 href=#__codelineno-1-23></a><span class=w>            </span><span class=no>echo &quot;provider=fallback&quot; &gt;&gt; $GITHUB_OUTPUT</span>
</span><span id=__span-1-24><a id=__codelineno-1-24 name=__codelineno-1-24 href=#__codelineno-1-24></a><span class=w>          </span><span class=no>fi</span>
</span><span id=__span-1-25><a id=__codelineno-1-25 name=__codelineno-1-25 href=#__codelineno-1-25></a>
</span><span id=__span-1-26><a id=__codelineno-1-26 name=__codelineno-1-26 href=#__codelineno-1-26></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Check diff size and generate description</span>
</span><span id=__span-1-27><a id=__codelineno-1-27 name=__codelineno-1-27 href=#__codelineno-1-27></a><span class=w>        </span><span class=nt>shell</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">bash</span>
</span><span id=__span-1-28><a id=__codelineno-1-28 name=__codelineno-1-28 href=#__codelineno-1-28></a><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|</span>
</span><span id=__span-1-29><a id=__codelineno-1-29 name=__codelineno-1-29 href=#__codelineno-1-29></a><span class=w>          </span><span class=no># Intelligent diff size management</span>
</span><span id=__span-1-30><a id=__codelineno-1-30 name=__codelineno-1-30 href=#__codelineno-1-30></a><span class=w>          </span><span class=no>DIFF_LINES=$(git diff --name-only ${{ inputs.base-branch }}...${{ inputs.head-branch }} | wc -l)</span>
</span><span id=__span-1-31><a id=__codelineno-1-31 name=__codelineno-1-31 href=#__codelineno-1-31></a><span class=w>          </span><span class=no>MAX_LINES=${{ inputs.max-diff-lines || &#39;20000&#39; }}</span>
</span><span id=__span-1-32><a id=__codelineno-1-32 name=__codelineno-1-32 href=#__codelineno-1-32></a>
</span><span id=__span-1-33><a id=__codelineno-1-33 name=__codelineno-1-33 href=#__codelineno-1-33></a><span class=w>          </span><span class=no>if [ &quot;$DIFF_LINES&quot; -gt &quot;$MAX_LINES&quot; ]; then</span>
</span><span id=__span-1-34><a id=__codelineno-1-34 name=__codelineno-1-34 href=#__codelineno-1-34></a><span class=w>            </span><span class=no>echo &quot;Diff too large ($DIFF_LINES lines), using fallback description&quot;</span>
</span><span id=__span-1-35><a id=__codelineno-1-35 name=__codelineno-1-35 href=#__codelineno-1-35></a><span class=w>            </span><span class=no>echo &quot;description=${{ inputs.fallback-description }}&quot; &gt;&gt; $GITHUB_OUTPUT</span>
</span><span id=__span-1-36><a id=__codelineno-1-36 name=__codelineno-1-36 href=#__codelineno-1-36></a><span class=w>            </span><span class=no>echo &quot;used-aipr=false&quot; &gt;&gt; $GITHUB_OUTPUT</span>
</span><span id=__span-1-37><a id=__codelineno-1-37 name=__codelineno-1-37 href=#__codelineno-1-37></a><span class=w>          </span><span class=no>elif [ &quot;${{ steps.detect-llm.outputs.provider }}&quot; = &quot;fallback&quot; ]; then</span>
</span><span id=__span-1-38><a id=__codelineno-1-38 name=__codelineno-1-38 href=#__codelineno-1-38></a><span class=w>            </span><span class=no>echo &quot;No LLM provider available, using fallback description&quot;</span>
</span><span id=__span-1-39><a id=__codelineno-1-39 name=__codelineno-1-39 href=#__codelineno-1-39></a><span class=w>            </span><span class=no>echo &quot;description=${{ inputs.fallback-description }}&quot; &gt;&gt; $GITHUB_OUTPUT</span>
</span><span id=__span-1-40><a id=__codelineno-1-40 name=__codelineno-1-40 href=#__codelineno-1-40></a><span class=w>            </span><span class=no>echo &quot;used-aipr=false&quot; &gt;&gt; $GITHUB_OUTPUT</span>
</span><span id=__span-1-41><a id=__codelineno-1-41 name=__codelineno-1-41 href=#__codelineno-1-41></a><span class=w>          </span><span class=no>else</span>
</span><span id=__span-1-42><a id=__codelineno-1-42 name=__codelineno-1-42 href=#__codelineno-1-42></a><span class=w>            </span><span class=no># Generate AI-enhanced description</span>
</span><span id=__span-1-43><a id=__codelineno-1-43 name=__codelineno-1-43 href=#__codelineno-1-43></a><span class=w>            </span><span class=no>aipr_generate_and_output_description</span>
</span><span id=__span-1-44><a id=__codelineno-1-44 name=__codelineno-1-44 href=#__codelineno-1-44></a><span class=w>          </span><span class=no>fi</span>
</span></code></pre></div> <h4 id=comprehensive-input-interface><strong>Comprehensive Input Interface</strong></h4> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=c1># Flexible configuration supporting multiple use cases</span>
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=nt>input_interface</span><span class=p>:</span>
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=w>  </span><span class=nt>required_inputs</span><span class=p>:</span>
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a><span class=w>    </span><span class=nt>github-token</span><span class=p>:</span><span class=w> </span><span class=s>&quot;GitHub</span><span class=nv> </span><span class=s>token</span><span class=nv> </span><span class=s>for</span><span class=nv> </span><span class=s>API</span><span class=nv> </span><span class=s>access</span><span class=nv> </span><span class=s>and</span><span class=nv> </span><span class=s>PR</span><span class=nv> </span><span class=s>creation&quot;</span>
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a><span class=w>    </span><span class=nt>base-branch</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Target</span><span class=nv> </span><span class=s>branch</span><span class=nv> </span><span class=s>for</span><span class=nv> </span><span class=s>pull</span><span class=nv> </span><span class=s>request&quot;</span>
</span><span id=__span-2-6><a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a><span class=w>    </span><span class=nt>head-branch</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Source</span><span class=nv> </span><span class=s>branch</span><span class=nv> </span><span class=s>containing</span><span class=nv> </span><span class=s>changes&quot;</span>
</span><span id=__span-2-7><a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a><span class=w>    </span><span class=nt>pr-title</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Title</span><span class=nv> </span><span class=s>for</span><span class=nv> </span><span class=s>the</span><span class=nv> </span><span class=s>pull</span><span class=nv> </span><span class=s>request&quot;</span>
</span><span id=__span-2-8><a id=__codelineno-2-8 name=__codelineno-2-8 href=#__codelineno-2-8></a><span class=w>    </span><span class=nt>fallback-description</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Description</span><span class=nv> </span><span class=s>to</span><span class=nv> </span><span class=s>use</span><span class=nv> </span><span class=s>if</span><span class=nv> </span><span class=s>AI</span><span class=nv> </span><span class=s>generation</span><span class=nv> </span><span class=s>fails&quot;</span>
</span><span id=__span-2-9><a id=__codelineno-2-9 name=__codelineno-2-9 href=#__codelineno-2-9></a>
</span><span id=__span-2-10><a id=__codelineno-2-10 name=__codelineno-2-10 href=#__codelineno-2-10></a><span class=w>  </span><span class=nt>optional_inputs</span><span class=p>:</span>
</span><span id=__span-2-11><a id=__codelineno-2-11 name=__codelineno-2-11 href=#__codelineno-2-11></a><span class=w>    </span><span class=nt>anthropic-api-key</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Anthropic</span><span class=nv> </span><span class=s>Claude</span><span class=nv> </span><span class=s>API</span><span class=nv> </span><span class=s>key</span><span class=nv> </span><span class=s>for</span><span class=nv> </span><span class=s>AI</span><span class=nv> </span><span class=s>enhancement&quot;</span>
</span><span id=__span-2-12><a id=__codelineno-2-12 name=__codelineno-2-12 href=#__codelineno-2-12></a><span class=w>    </span><span class=nt>azure-api-key</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Azure</span><span class=nv> </span><span class=s>OpenAI</span><span class=nv> </span><span class=s>API</span><span class=nv> </span><span class=s>key&quot;</span>
</span><span id=__span-2-13><a id=__codelineno-2-13 name=__codelineno-2-13 href=#__codelineno-2-13></a><span class=w>    </span><span class=nt>azure-api-base</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Azure</span><span class=nv> </span><span class=s>OpenAI</span><span class=nv> </span><span class=s>endpoint</span><span class=nv> </span><span class=s>URL&quot;</span>
</span><span id=__span-2-14><a id=__codelineno-2-14 name=__codelineno-2-14 href=#__codelineno-2-14></a><span class=w>    </span><span class=nt>azure-api-version</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Azure</span><span class=nv> </span><span class=s>OpenAI</span><span class=nv> </span><span class=s>API</span><span class=nv> </span><span class=s>version&quot;</span>
</span><span id=__span-2-15><a id=__codelineno-2-15 name=__codelineno-2-15 href=#__codelineno-2-15></a><span class=w>    </span><span class=nt>openai-api-key</span><span class=p>:</span><span class=w> </span><span class=s>&quot;OpenAI</span><span class=nv> </span><span class=s>API</span><span class=nv> </span><span class=s>key&quot;</span>
</span><span id=__span-2-16><a id=__codelineno-2-16 name=__codelineno-2-16 href=#__codelineno-2-16></a><span class=w>    </span><span class=nt>max-diff-lines</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Maximum</span><span class=nv> </span><span class=s>diff</span><span class=nv> </span><span class=s>size</span><span class=nv> </span><span class=s>for</span><span class=nv> </span><span class=s>AI</span><span class=nv> </span><span class=s>processing</span><span class=nv> </span><span class=s>(default:</span><span class=nv> </span><span class=s>20000)&quot;</span>
</span><span id=__span-2-17><a id=__codelineno-2-17 name=__codelineno-2-17 href=#__codelineno-2-17></a><span class=w>    </span><span class=nt>use-vulns-flag</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Enable</span><span class=nv> </span><span class=s>vulnerability</span><span class=nv> </span><span class=s>analysis</span><span class=nv> </span><span class=s>(default:</span><span class=nv> </span><span class=s>true)&quot;</span>
</span><span id=__span-2-18><a id=__codelineno-2-18 name=__codelineno-2-18 href=#__codelineno-2-18></a><span class=w>    </span><span class=nt>target-branch-for-aipr</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Branch</span><span class=nv> </span><span class=s>for</span><span class=nv> </span><span class=s>aipr</span><span class=nv> </span><span class=s>analysis</span><span class=nv> </span><span class=s>(defaults</span><span class=nv> </span><span class=s>to</span><span class=nv> </span><span class=s>base-branch)&quot;</span>
</span><span id=__span-2-19><a id=__codelineno-2-19 name=__codelineno-2-19 href=#__codelineno-2-19></a><span class=w>    </span><span class=nt>additional-description</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Extra</span><span class=nv> </span><span class=s>content</span><span class=nv> </span><span class=s>to</span><span class=nv> </span><span class=s>append</span><span class=nv> </span><span class=s>to</span><span class=nv> </span><span class=s>generated</span><span class=nv> </span><span class=s>description&quot;</span>
</span></code></pre></div> <h4 id=standardized-output-interface><strong>Standardized Output Interface</strong></h4> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=c1># Comprehensive outputs for workflow coordination</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=nt>output_interface</span><span class=p>:</span>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=w>  </span><span class=nt>pr-url</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Complete</span><span class=nv> </span><span class=s>URL</span><span class=nv> </span><span class=s>to</span><span class=nv> </span><span class=s>created</span><span class=nv> </span><span class=s>pull</span><span class=nv> </span><span class=s>request&quot;</span>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=w>  </span><span class=nt>pr-number</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Pull</span><span class=nv> </span><span class=s>request</span><span class=nv> </span><span class=s>number</span><span class=nv> </span><span class=s>for</span><span class=nv> </span><span class=s>further</span><span class=nv> </span><span class=s>processing&quot;</span>
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a><span class=w>  </span><span class=nt>used-aipr</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Boolean</span><span class=nv> </span><span class=s>indicating</span><span class=nv> </span><span class=s>if</span><span class=nv> </span><span class=s>AI</span><span class=nv> </span><span class=s>enhancement</span><span class=nv> </span><span class=s>was</span><span class=nv> </span><span class=s>successfully</span><span class=nv> </span><span class=s>used&quot;</span>
</span><span id=__span-3-6><a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a><span class=w>  </span><span class=nt>provider-used</span><span class=p>:</span><span class=w> </span><span class=s>&quot;LLM</span><span class=nv> </span><span class=s>provider</span><span class=nv> </span><span class=s>used</span><span class=nv> </span><span class=s>for</span><span class=nv> </span><span class=s>description</span><span class=nv> </span><span class=s>generation&quot;</span>
</span><span id=__span-3-7><a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a><span class=w>  </span><span class=nt>description-length</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Character</span><span class=nv> </span><span class=s>count</span><span class=nv> </span><span class=s>of</span><span class=nv> </span><span class=s>generated</span><span class=nv> </span><span class=s>description&quot;</span>
</span></code></pre></div> <h3 id=material-artificial-intelligence-ai-enhancement-pipeline>:material-artificial-intelligence AI Enhancement Pipeline</h3> <h4 id=multi-provider-llm-detection><strong>Multi-Provider LLM Detection</strong></h4> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=c1># Sophisticated provider priority and fallback system</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=nt>llm_provider_system</span><span class=p>:</span>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=w>  </span><span class=nt>priority_order</span><span class=p>:</span>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=w>    </span><span class=nt>1</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Anthropic</span><span class=nv> </span><span class=s>Claude</span><span class=nv> </span><span class=s>(if</span><span class=nv> </span><span class=s>ANTHROPIC_API_KEY</span><span class=nv> </span><span class=s>provided)&quot;</span>
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a><span class=w>    </span><span class=nt>2</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Azure</span><span class=nv> </span><span class=s>OpenAI</span><span class=nv> </span><span class=s>(if</span><span class=nv> </span><span class=s>AZURE_API_KEY</span><span class=nv> </span><span class=s>and</span><span class=nv> </span><span class=s>AZURE_API_BASE</span><span class=nv> </span><span class=s>provided)&quot;</span>
</span><span id=__span-4-6><a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a><span class=w>    </span><span class=nt>3</span><span class=p>:</span><span class=w> </span><span class=s>&quot;OpenAI</span><span class=nv> </span><span class=s>(if</span><span class=nv> </span><span class=s>OPENAI_API_KEY</span><span class=nv> </span><span class=s>provided)&quot;</span>
</span><span id=__span-4-7><a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a><span class=w>    </span><span class=nt>4</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Fallback</span><span class=nv> </span><span class=s>to</span><span class=nv> </span><span class=s>provided</span><span class=nv> </span><span class=s>description&quot;</span>
</span><span id=__span-4-8><a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a>
</span><span id=__span-4-9><a id=__codelineno-4-9 name=__codelineno-4-9 href=#__codelineno-4-9></a><span class=w>  </span><span class=nt>model_configuration</span><span class=p>:</span>
</span><span id=__span-4-10><a id=__codelineno-4-10 name=__codelineno-4-10 href=#__codelineno-4-10></a><span class=w>    </span><span class=nt>anthropic</span><span class=p>:</span><span class=w> </span><span class=s>&quot;claude-4</span><span class=nv> </span><span class=s>for</span><span class=nv> </span><span class=s>advanced</span><span class=nv> </span><span class=s>code</span><span class=nv> </span><span class=s>analysis&quot;</span>
</span><span id=__span-4-11><a id=__codelineno-4-11 name=__codelineno-4-11 href=#__codelineno-4-11></a><span class=w>    </span><span class=nt>azure</span><span class=p>:</span><span class=w> </span><span class=s>&quot;azure/gpt-4o</span><span class=nv> </span><span class=s>for</span><span class=nv> </span><span class=s>enterprise</span><span class=nv> </span><span class=s>environments&quot;</span>
</span><span id=__span-4-12><a id=__codelineno-4-12 name=__codelineno-4-12 href=#__codelineno-4-12></a><span class=w>    </span><span class=nt>openai</span><span class=p>:</span><span class=w> </span><span class=s>&quot;gpt-4.1</span><span class=nv> </span><span class=s>for</span><span class=nv> </span><span class=s>general</span><span class=nv> </span><span class=s>use</span><span class=nv> </span><span class=s>cases&quot;</span>
</span><span id=__span-4-13><a id=__codelineno-4-13 name=__codelineno-4-13 href=#__codelineno-4-13></a>
</span><span id=__span-4-14><a id=__codelineno-4-14 name=__codelineno-4-14 href=#__codelineno-4-14></a><span class=w>  </span><span class=nt>intelligent_fallback</span><span class=p>:</span>
</span><span id=__span-4-15><a id=__codelineno-4-15 name=__codelineno-4-15 href=#__codelineno-4-15></a><span class=w>    </span><span class=nt>diff_size_limit</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Skip</span><span class=nv> </span><span class=s>AI</span><span class=nv> </span><span class=s>generation</span><span class=nv> </span><span class=s>for</span><span class=nv> </span><span class=s>diffs</span><span class=nv> </span><span class=s>&gt;20,000</span><span class=nv> </span><span class=s>lines&quot;</span>
</span><span id=__span-4-16><a id=__codelineno-4-16 name=__codelineno-4-16 href=#__codelineno-4-16></a><span class=w>    </span><span class=nt>api_failure_handling</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Graceful</span><span class=nv> </span><span class=s>degradation</span><span class=nv> </span><span class=s>to</span><span class=nv> </span><span class=s>fallback</span><span class=nv> </span><span class=s>description&quot;</span>
</span><span id=__span-4-17><a id=__codelineno-4-17 name=__codelineno-4-17 href=#__codelineno-4-17></a><span class=w>    </span><span class=nt>timeout_management</span><span class=p>:</span><span class=w> </span><span class=s>&quot;AI</span><span class=nv> </span><span class=s>generation</span><span class=nv> </span><span class=s>timeout</span><span class=nv> </span><span class=s>with</span><span class=nv> </span><span class=s>fallback&quot;</span>
</span></code></pre></div> <h4 id=content-generation-strategy><strong>Content Generation Strategy</strong></h4> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=c1># Advanced AI-enhanced description generation</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=nt>content_generation</span><span class=p>:</span>
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=w>  </span><span class=nt>analysis_capabilities</span><span class=p>:</span>
</span><span id=__span-5-4><a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=w>    </span><span class=nt>code_changes</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Detailed</span><span class=nv> </span><span class=s>analysis</span><span class=nv> </span><span class=s>of</span><span class=nv> </span><span class=s>code</span><span class=nv> </span><span class=s>modifications&quot;</span>
</span><span id=__span-5-5><a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=w>    </span><span class=nt>vulnerability_assessment</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Security</span><span class=nv> </span><span class=s>impact</span><span class=nv> </span><span class=s>analysis</span><span class=nv> </span><span class=s>when</span><span class=nv> </span><span class=s>enabled&quot;</span>
</span><span id=__span-5-6><a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a><span class=w>    </span><span class=nt>dependency_updates</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Package</span><span class=nv> </span><span class=s>and</span><span class=nv> </span><span class=s>dependency</span><span class=nv> </span><span class=s>change</span><span class=nv> </span><span class=s>summaries&quot;</span>
</span><span id=__span-5-7><a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a><span class=w>    </span><span class=nt>breaking_changes</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Detection</span><span class=nv> </span><span class=s>and</span><span class=nv> </span><span class=s>documentation</span><span class=nv> </span><span class=s>of</span><span class=nv> </span><span class=s>breaking</span><span class=nv> </span><span class=s>changes&quot;</span>
</span><span id=__span-5-8><a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a>
</span><span id=__span-5-9><a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a><span class=w>  </span><span class=nt>description_structure</span><span class=p>:</span>
</span><span id=__span-5-10><a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a><span class=w>    </span><span class=nt>summary</span><span class=p>:</span><span class=w> </span><span class=s>&quot;High-level</span><span class=nv> </span><span class=s>overview</span><span class=nv> </span><span class=s>of</span><span class=nv> </span><span class=s>changes&quot;</span>
</span><span id=__span-5-11><a id=__codelineno-5-11 name=__codelineno-5-11 href=#__codelineno-5-11></a><span class=w>    </span><span class=nt>technical_details</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Specific</span><span class=nv> </span><span class=s>implementation</span><span class=nv> </span><span class=s>changes&quot;</span>
</span><span id=__span-5-12><a id=__codelineno-5-12 name=__codelineno-5-12 href=#__codelineno-5-12></a><span class=w>    </span><span class=nt>impact_assessment</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Business</span><span class=nv> </span><span class=s>and</span><span class=nv> </span><span class=s>operational</span><span class=nv> </span><span class=s>impact&quot;</span>
</span><span id=__span-5-13><a id=__codelineno-5-13 name=__codelineno-5-13 href=#__codelineno-5-13></a><span class=w>    </span><span class=nt>testing_notes</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Recommended</span><span class=nv> </span><span class=s>testing</span><span class=nv> </span><span class=s>approaches&quot;</span>
</span><span id=__span-5-14><a id=__codelineno-5-14 name=__codelineno-5-14 href=#__codelineno-5-14></a><span class=w>    </span><span class=nt>additional_content</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Custom</span><span class=nv> </span><span class=s>content</span><span class=nv> </span><span class=s>appended</span><span class=nv> </span><span class=s>to</span><span class=nv> </span><span class=s>generated</span><span class=nv> </span><span class=s>description&quot;</span>
</span></code></pre></div> <h2 id=implementation-strategy>Implementation Strategy</h2> <h3 id=material-workflow-usage-patterns-and-limitations>:material-workflow Usage Patterns and Limitations</h3> <h4 id=main-branch-workflows-can-use-action><strong>Main Branch Workflows (Can Use Action)</strong></h4> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=c1># Workflows that can leverage the reusable action</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=nt>main_branch_workflows</span><span class=p>:</span>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=w>  </span><span class=nt>template_sync_workflow</span><span class=p>:</span>
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a><span class=w>    </span><span class=nt>usage</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|</span>
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a><span class=w>      </span><span class=no>- name: Create enhanced template sync PR</span>
</span><span id=__span-6-6><a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a><span class=w>        </span><span class=no>uses: ./.github/actions/create-enhanced-pr</span>
</span><span id=__span-6-7><a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a><span class=w>        </span><span class=no>with:</span>
</span><span id=__span-6-8><a id=__codelineno-6-8 name=__codelineno-6-8 href=#__codelineno-6-8></a><span class=w>          </span><span class=no>base-branch: main</span>
</span><span id=__span-6-9><a id=__codelineno-6-9 name=__codelineno-6-9 href=#__codelineno-6-9></a><span class=w>          </span><span class=no>head-branch: ${{ env.SYNC_BRANCH }}</span>
</span><span id=__span-6-10><a id=__codelineno-6-10 name=__codelineno-6-10 href=#__codelineno-6-10></a><span class=w>          </span><span class=no>pr-title: &quot;🔄 Sync template updates $(date +%Y-%m-%d)&quot;</span>
</span><span id=__span-6-11><a id=__codelineno-6-11 name=__codelineno-6-11 href=#__codelineno-6-11></a><span class=w>          </span><span class=no>fallback-description: ${{ env.FALLBACK_DESCRIPTION }}</span>
</span><span id=__span-6-12><a id=__codelineno-6-12 name=__codelineno-6-12 href=#__codelineno-6-12></a><span class=w>          </span><span class=no>use-vulns-flag: &#39;false&#39;</span>
</span><span id=__span-6-13><a id=__codelineno-6-13 name=__codelineno-6-13 href=#__codelineno-6-13></a><span class=w>          </span><span class=no>target-branch-for-aipr: main</span>
</span><span id=__span-6-14><a id=__codelineno-6-14 name=__codelineno-6-14 href=#__codelineno-6-14></a>
</span><span id=__span-6-15><a id=__codelineno-6-15 name=__codelineno-6-15 href=#__codelineno-6-15></a><span class=w>  </span><span class=nt>build_workflow</span><span class=p>:</span>
</span><span id=__span-6-16><a id=__codelineno-6-16 name=__codelineno-6-16 href=#__codelineno-6-16></a><span class=w>    </span><span class=nt>usage</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Can</span><span class=nv> </span><span class=s>use</span><span class=nv> </span><span class=s>action</span><span class=nv> </span><span class=s>for</span><span class=nv> </span><span class=s>automated</span><span class=nv> </span><span class=s>release</span><span class=nv> </span><span class=s>PRs&quot;</span>
</span><span id=__span-6-17><a id=__codelineno-6-17 name=__codelineno-6-17 href=#__codelineno-6-17></a>
</span><span id=__span-6-18><a id=__codelineno-6-18 name=__codelineno-6-18 href=#__codelineno-6-18></a><span class=w>  </span><span class=nt>validation_workflow</span><span class=p>:</span>
</span><span id=__span-6-19><a id=__codelineno-6-19 name=__codelineno-6-19 href=#__codelineno-6-19></a><span class=w>    </span><span class=nt>usage</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Can</span><span class=nv> </span><span class=s>use</span><span class=nv> </span><span class=s>action</span><span class=nv> </span><span class=s>for</span><span class=nv> </span><span class=s>validation</span><span class=nv> </span><span class=s>result</span><span class=nv> </span><span class=s>PRs&quot;</span>
</span></code></pre></div> <h4 id=branch-limitation-handling><strong>Branch Limitation Handling</strong></h4> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=c1># Critical discovery: GitHub Actions branch dependency</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=nt>branch_limitations</span><span class=p>:</span>
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a><span class=w>  </span><span class=nt>problem</span><span class=p>:</span><span class=w> </span><span class=s>&quot;GitHub</span><span class=nv> </span><span class=s>Actions</span><span class=nv> </span><span class=s>can</span><span class=nv> </span><span class=s>only</span><span class=nv> </span><span class=s>reference</span><span class=nv> </span><span class=s>actions</span><span class=nv> </span><span class=s>on</span><span class=nv> </span><span class=s>the</span><span class=nv> </span><span class=s>same</span><span class=nv> </span><span class=s>branch</span><span class=nv> </span><span class=s>where</span><span class=nv> </span><span class=s>workflow</span><span class=nv> </span><span class=s>runs&quot;</span>
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a>
</span><span id=__span-7-5><a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a><span class=w>  </span><span class=nt>affected_workflows</span><span class=p>:</span>
</span><span id=__span-7-6><a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a><span class=w>    </span><span class=nt>sync_workflow</span><span class=p>:</span>
</span><span id=__span-7-7><a id=__codelineno-7-7 name=__codelineno-7-7 href=#__codelineno-7-7></a><span class=w>      </span><span class=nt>issue</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Runs</span><span class=nv> </span><span class=s>from</span><span class=nv> </span><span class=s>fork_upstream</span><span class=nv> </span><span class=s>branch</span><span class=nv> </span><span class=s>where</span><span class=nv> </span><span class=s>action</span><span class=nv> </span><span class=s>doesn&#39;t</span><span class=nv> </span><span class=s>exist&quot;</span>
</span><span id=__span-7-8><a id=__codelineno-7-8 name=__codelineno-7-8 href=#__codelineno-7-8></a><span class=w>      </span><span class=nt>solution</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Embed</span><span class=nv> </span><span class=s>PR</span><span class=nv> </span><span class=s>creation</span><span class=nv> </span><span class=s>logic</span><span class=nv> </span><span class=s>directly</span><span class=nv> </span><span class=s>in</span><span class=nv> </span><span class=s>workflow&quot;</span>
</span><span id=__span-7-9><a id=__codelineno-7-9 name=__codelineno-7-9 href=#__codelineno-7-9></a>
</span><span id=__span-7-10><a id=__codelineno-7-10 name=__codelineno-7-10 href=#__codelineno-7-10></a><span class=w>  </span><span class=nt>implementation_strategy</span><span class=p>:</span>
</span><span id=__span-7-11><a id=__codelineno-7-11 name=__codelineno-7-11 href=#__codelineno-7-11></a><span class=w>    </span><span class=nt>primary_pattern</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Use</span><span class=nv> </span><span class=s>reusable</span><span class=nv> </span><span class=s>action</span><span class=nv> </span><span class=s>for</span><span class=nv> </span><span class=s>main</span><span class=nv> </span><span class=s>branch</span><span class=nv> </span><span class=s>workflows&quot;</span>
</span><span id=__span-7-12><a id=__codelineno-7-12 name=__codelineno-7-12 href=#__codelineno-7-12></a><span class=w>    </span><span class=nt>fallback_pattern</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Embed</span><span class=nv> </span><span class=s>logic</span><span class=nv> </span><span class=s>directly</span><span class=nv> </span><span class=s>when</span><span class=nv> </span><span class=s>branch</span><span class=nv> </span><span class=s>limitations</span><span class=nv> </span><span class=s>prevent</span><span class=nv> </span><span class=s>action</span><span class=nv> </span><span class=s>usage&quot;</span>
</span><span id=__span-7-13><a id=__codelineno-7-13 name=__codelineno-7-13 href=#__codelineno-7-13></a><span class=w>    </span><span class=nt>consistency_approach</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Maintain</span><span class=nv> </span><span class=s>identical</span><span class=nv> </span><span class=s>AI</span><span class=nv> </span><span class=s>enhancement</span><span class=nv> </span><span class=s>logic</span><span class=nv> </span><span class=s>in</span><span class=nv> </span><span class=s>both</span><span class=nv> </span><span class=s>patterns&quot;</span>
</span></code></pre></div> <h4 id=sync-workflow-embedded-logic><strong>Sync Workflow Embedded Logic</strong></h4> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=c1># Required embedded implementation for sync workflow</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=nt>sync_workflow_embedded</span><span class=p>:</span>
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a><span class=w>  </span><span class=nt>reason</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Action</span><span class=nv> </span><span class=s>not</span><span class=nv> </span><span class=s>available</span><span class=nv> </span><span class=s>on</span><span class=nv> </span><span class=s>fork_upstream</span><span class=nv> </span><span class=s>branch&quot;</span>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a>
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a><span class=w>  </span><span class=nt>implementation</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|</span>
</span><span id=__span-8-6><a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a><span class=w>    </span><span class=no># ❌ This DOES NOT work in sync.yml</span>
</span><span id=__span-8-7><a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a><span class=w>    </span><span class=no>- name: Create enhanced sync PR</span>
</span><span id=__span-8-8><a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a><span class=w>      </span><span class=no>uses: ./.github/actions/create-enhanced-pr  # Action doesn&#39;t exist on fork_upstream</span>
</span><span id=__span-8-9><a id=__codelineno-8-9 name=__codelineno-8-9 href=#__codelineno-8-9></a>
</span><span id=__span-8-10><a id=__codelineno-8-10 name=__codelineno-8-10 href=#__codelineno-8-10></a><span class=w>    </span><span class=no># ✅ This works in sync.yml (embedded logic)</span>
</span><span id=__span-8-11><a id=__codelineno-8-11 name=__codelineno-8-11 href=#__codelineno-8-11></a><span class=w>    </span><span class=no>- name: Create enhanced sync PR</span>
</span><span id=__span-8-12><a id=__codelineno-8-12 name=__codelineno-8-12 href=#__codelineno-8-12></a><span class=w>      </span><span class=no>env:</span>
</span><span id=__span-8-13><a id=__codelineno-8-13 name=__codelineno-8-13 href=#__codelineno-8-13></a><span class=w>        </span><span class=no>GITHUB_TOKEN: ${{ secrets.GH_TOKEN }}</span>
</span><span id=__span-8-14><a id=__codelineno-8-14 name=__codelineno-8-14 href=#__codelineno-8-14></a><span class=w>        </span><span class=no>ANTHROPIC_API_KEY: ${{ secrets.ANTHROPIC_API_KEY }}</span>
</span><span id=__span-8-15><a id=__codelineno-8-15 name=__codelineno-8-15 href=#__codelineno-8-15></a><span class=w>      </span><span class=no>run: |</span>
</span><span id=__span-8-16><a id=__codelineno-8-16 name=__codelineno-8-16 href=#__codelineno-8-16></a><span class=w>        </span><span class=no># Detect available LLM provider</span>
</span><span id=__span-8-17><a id=__codelineno-8-17 name=__codelineno-8-17 href=#__codelineno-8-17></a><span class=w>        </span><span class=no>if [ -n &quot;$ANTHROPIC_API_KEY&quot; ]; then</span>
</span><span id=__span-8-18><a id=__codelineno-8-18 name=__codelineno-8-18 href=#__codelineno-8-18></a><span class=w>          </span><span class=no>PROVIDER=&quot;anthropic&quot;</span>
</span><span id=__span-8-19><a id=__codelineno-8-19 name=__codelineno-8-19 href=#__codelineno-8-19></a><span class=w>          </span><span class=no>MODEL=&quot;claude-4&quot;</span>
</span><span id=__span-8-20><a id=__codelineno-8-20 name=__codelineno-8-20 href=#__codelineno-8-20></a><span class=w>        </span><span class=no>elif [ -n &quot;$AZURE_API_KEY&quot; ] &amp;&amp; [ -n &quot;$AZURE_API_BASE&quot; ]; then</span>
</span><span id=__span-8-21><a id=__codelineno-8-21 name=__codelineno-8-21 href=#__codelineno-8-21></a><span class=w>          </span><span class=no>PROVIDER=&quot;azure&quot;</span>
</span><span id=__span-8-22><a id=__codelineno-8-22 name=__codelineno-8-22 href=#__codelineno-8-22></a><span class=w>          </span><span class=no>MODEL=&quot;azure/gpt-4o&quot;</span>
</span><span id=__span-8-23><a id=__codelineno-8-23 name=__codelineno-8-23 href=#__codelineno-8-23></a><span class=w>        </span><span class=no>else</span>
</span><span id=__span-8-24><a id=__codelineno-8-24 name=__codelineno-8-24 href=#__codelineno-8-24></a><span class=w>          </span><span class=no>PROVIDER=&quot;fallback&quot;</span>
</span><span id=__span-8-25><a id=__codelineno-8-25 name=__codelineno-8-25 href=#__codelineno-8-25></a><span class=w>        </span><span class=no>fi</span>
</span><span id=__span-8-26><a id=__codelineno-8-26 name=__codelineno-8-26 href=#__codelineno-8-26></a>
</span><span id=__span-8-27><a id=__codelineno-8-27 name=__codelineno-8-27 href=#__codelineno-8-27></a><span class=w>        </span><span class=no># Generate AI-enhanced description with same logic as action</span>
</span><span id=__span-8-28><a id=__codelineno-8-28 name=__codelineno-8-28 href=#__codelineno-8-28></a><span class=w>        </span><span class=no>[embedded aipr generation logic]</span>
</span></code></pre></div> <h3 id=material-shield-check-error-handling-and-reliability>:material-shield-check Error Handling and Reliability</h3> <h4 id=graceful-degradation-framework><strong>Graceful Degradation Framework</strong></h4> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=c1># Comprehensive error handling ensuring PR creation always succeeds</span>
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a><span class=nt>error_handling</span><span class=p>:</span>
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a><span class=w>  </span><span class=nt>ai_generation_failure</span><span class=p>:</span>
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a><span class=w>    </span><span class=nt>detection</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Monitor</span><span class=nv> </span><span class=s>aipr</span><span class=nv> </span><span class=s>command</span><span class=nv> </span><span class=s>exit</span><span class=nv> </span><span class=s>codes</span><span class=nv> </span><span class=s>and</span><span class=nv> </span><span class=s>output&quot;</span>
</span><span id=__span-9-5><a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a><span class=w>    </span><span class=nt>response</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Log</span><span class=nv> </span><span class=s>warning</span><span class=nv> </span><span class=s>and</span><span class=nv> </span><span class=s>proceed</span><span class=nv> </span><span class=s>with</span><span class=nv> </span><span class=s>fallback</span><span class=nv> </span><span class=s>description&quot;</span>
</span><span id=__span-9-6><a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a>
</span><span id=__span-9-7><a id=__codelineno-9-7 name=__codelineno-9-7 href=#__codelineno-9-7></a><span class=w>  </span><span class=nt>api_key_validation</span><span class=p>:</span>
</span><span id=__span-9-8><a id=__codelineno-9-8 name=__codelineno-9-8 href=#__codelineno-9-8></a><span class=w>    </span><span class=nt>detection</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Verify</span><span class=nv> </span><span class=s>API</span><span class=nv> </span><span class=s>key</span><span class=nv> </span><span class=s>format</span><span class=nv> </span><span class=s>and</span><span class=nv> </span><span class=s>availability&quot;</span>
</span><span id=__span-9-9><a id=__codelineno-9-9 name=__codelineno-9-9 href=#__codelineno-9-9></a><span class=w>    </span><span class=nt>response</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Skip</span><span class=nv> </span><span class=s>AI</span><span class=nv> </span><span class=s>generation</span><span class=nv> </span><span class=s>and</span><span class=nv> </span><span class=s>use</span><span class=nv> </span><span class=s>fallback</span><span class=nv> </span><span class=s>description&quot;</span>
</span><span id=__span-9-10><a id=__codelineno-9-10 name=__codelineno-9-10 href=#__codelineno-9-10></a>
</span><span id=__span-9-11><a id=__codelineno-9-11 name=__codelineno-9-11 href=#__codelineno-9-11></a><span class=w>  </span><span class=nt>network_issues</span><span class=p>:</span>
</span><span id=__span-9-12><a id=__codelineno-9-12 name=__codelineno-9-12 href=#__codelineno-9-12></a><span class=w>    </span><span class=nt>detection</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Timeout</span><span class=nv> </span><span class=s>handling</span><span class=nv> </span><span class=s>for</span><span class=nv> </span><span class=s>AI</span><span class=nv> </span><span class=s>API</span><span class=nv> </span><span class=s>calls&quot;</span>
</span><span id=__span-9-13><a id=__codelineno-9-13 name=__codelineno-9-13 href=#__codelineno-9-13></a><span class=w>    </span><span class=nt>response</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Automatic</span><span class=nv> </span><span class=s>fallback</span><span class=nv> </span><span class=s>after</span><span class=nv> </span><span class=s>30-second</span><span class=nv> </span><span class=s>timeout&quot;</span>
</span><span id=__span-9-14><a id=__codelineno-9-14 name=__codelineno-9-14 href=#__codelineno-9-14></a>
</span><span id=__span-9-15><a id=__codelineno-9-15 name=__codelineno-9-15 href=#__codelineno-9-15></a><span class=w>  </span><span class=nt>github_api_issues</span><span class=p>:</span>
</span><span id=__span-9-16><a id=__codelineno-9-16 name=__codelineno-9-16 href=#__codelineno-9-16></a><span class=w>    </span><span class=nt>detection</span><span class=p>:</span><span class=w> </span><span class=s>&quot;GitHub</span><span class=nv> </span><span class=s>PR</span><span class=nv> </span><span class=s>creation</span><span class=nv> </span><span class=s>API</span><span class=nv> </span><span class=s>failures&quot;</span>
</span><span id=__span-9-17><a id=__codelineno-9-17 name=__codelineno-9-17 href=#__codelineno-9-17></a><span class=w>    </span><span class=nt>response</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Retry</span><span class=nv> </span><span class=s>with</span><span class=nv> </span><span class=s>exponential</span><span class=nv> </span><span class=s>backoff,</span><span class=nv> </span><span class=s>detailed</span><span class=nv> </span><span class=s>error</span><span class=nv> </span><span class=s>logging&quot;</span>
</span></code></pre></div> <h4 id=comprehensive-logging-and-debugging><strong>Comprehensive Logging and Debugging</strong></h4> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=c1># Enhanced observability for troubleshooting</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a><span class=nt>logging_framework</span><span class=p>:</span>
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a><span class=w>  </span><span class=nt>provider_detection</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Log</span><span class=nv> </span><span class=s>which</span><span class=nv> </span><span class=s>LLM</span><span class=nv> </span><span class=s>provider</span><span class=nv> </span><span class=s>was</span><span class=nv> </span><span class=s>selected</span><span class=nv> </span><span class=s>and</span><span class=nv> </span><span class=s>why&quot;</span>
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a><span class=w>  </span><span class=nt>ai_generation</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Log</span><span class=nv> </span><span class=s>AI</span><span class=nv> </span><span class=s>generation</span><span class=nv> </span><span class=s>success/failure</span><span class=nv> </span><span class=s>with</span><span class=nv> </span><span class=s>timing&quot;</span>
</span><span id=__span-10-5><a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a><span class=w>  </span><span class=nt>fallback_usage</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Clear</span><span class=nv> </span><span class=s>indication</span><span class=nv> </span><span class=s>when</span><span class=nv> </span><span class=s>fallback</span><span class=nv> </span><span class=s>description</span><span class=nv> </span><span class=s>used&quot;</span>
</span><span id=__span-10-6><a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a><span class=w>  </span><span class=nt>pr_creation</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Detailed</span><span class=nv> </span><span class=s>logging</span><span class=nv> </span><span class=s>of</span><span class=nv> </span><span class=s>GitHub</span><span class=nv> </span><span class=s>API</span><span class=nv> </span><span class=s>interactions&quot;</span>
</span><span id=__span-10-7><a id=__codelineno-10-7 name=__codelineno-10-7 href=#__codelineno-10-7></a><span class=w>  </span><span class=nt>output_validation</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Verify</span><span class=nv> </span><span class=s>all</span><span class=nv> </span><span class=s>expected</span><span class=nv> </span><span class=s>outputs</span><span class=nv> </span><span class=s>are</span><span class=nv> </span><span class=s>generated&quot;</span>
</span></code></pre></div> <h2 id=benefits-and-rationale>Benefits and Rationale</h2> <h3 id=material-trending-up-strategic-advantages>:material-trending-up Strategic Advantages</h3> <h4 id=code-duplication-elimination><strong>Code Duplication Elimination</strong></h4> <ul> <li>Single implementation of 80+ lines of PR creation logic eliminates maintenance burden</li> <li>Consistent AI enhancement across all workflows using the reusable action</li> <li>Centralized improvements benefit all consuming workflows automatically</li> <li>Reduced testing complexity through single action testing instead of multiple implementations</li> </ul> <h4 id=enhanced-maintainability-and-consistency><strong>Enhanced Maintainability and Consistency</strong></h4> <ul> <li>Changes to PR creation behavior only need to be made in one location</li> <li>Standardized interface ensures consistent behavior across different workflows</li> <li>Better error handling through centralized error management and logging</li> <li>Enhanced flexibility enabling easy addition of new parameters or features</li> </ul> <h4 id=development-experience-improvement><strong>Development Experience Improvement</strong></h4> <ul> <li>Workflows can focus on business logic rather than PR creation implementation details</li> <li>Clear separation of concerns between workflow logic and PR creation functionality</li> <li>Improved readability as workflows become more focused and easier to understand</li> <li>Easier debugging with issues isolated to single action implementation</li> </ul> <h3 id=material-cog-outline-operational-benefits>:material-cog-outline Operational Benefits</h3> <h4 id=ai-integration-excellence><strong>AI Integration Excellence</strong></h4> <ul> <li>Consistent aipr configuration across all workflows using the action</li> <li>Provider flexibility with support for multiple LLM providers and automatic fallback</li> <li>Centralized configuration management for API keys and parameters</li> <li>Performance optimization through shared diff size management and token limit handling</li> </ul> <h4 id=workflow-simplification><strong>Workflow Simplification</strong></h4> <ul> <li>Reduced complexity as workflows delegate PR creation to specialized action</li> <li>Standardized outputs enable consistent workflow coordination patterns</li> <li>Enhanced error resilience through graceful degradation and fallback mechanisms</li> <li>Better testing capability through isolated action testing</li> </ul> <h2 id=alternative-approaches-considered>Alternative Approaches Considered</h2> <h3 id=shared-shell-functions><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2c5.53 0 10 4.47 10 10s-4.47 10-10 10S2 17.53 2 12 6.47 2 12 2m3.59 5L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41z"/></svg></span> Shared Shell Functions</h3> <p><strong>Approach</strong>: Extract common functionality into shared shell scripts</p> <ul> <li><strong>Pros</strong>: Lightweight approach, easy to understand and modify</li> <li><strong>Cons</strong>: Limited parameter handling, no type safety, harder to test effectively</li> <li><strong>Decision</strong>: Rejected due to limited flexibility and maintainability concerns</li> </ul> <h3 id=external-action-from-github-marketplace><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2c5.53 0 10 4.47 10 10s-4.47 10-10 10S2 17.53 2 12 6.47 2 12 2m3.59 5L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41z"/></svg></span> External Action from GitHub Marketplace</h3> <p><strong>Approach</strong>: Use existing community-maintained action for PR creation</p> <ul> <li><strong>Pros</strong>: Maintained by community, potentially more features and wider adoption</li> <li><strong>Cons</strong>: External dependency, less control over behavior, may not support aipr integration</li> <li><strong>Decision</strong>: Rejected due to specific requirements for AI enhancement and control needs</li> </ul> <h3 id=copy-paste-with-documentation><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2c5.53 0 10 4.47 10 10s-4.47 10-10 10S2 17.53 2 12 6.47 2 12 2m3.59 5L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41z"/></svg></span> Copy-Paste with Documentation</h3> <p><strong>Approach</strong>: Maintain documented copy-paste patterns for PR creation</p> <ul> <li><strong>Pros</strong>: Simple approach with no abstraction complexity</li> <li><strong>Cons</strong>: Significant maintenance burden, high inconsistency risk, violates DRY principle</li> <li><strong>Decision</strong>: Rejected due to long-term maintenance concerns and consistency requirements</li> </ul> <h3 id=npm-package-for-pr-creation><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2c5.53 0 10 4.47 10 10s-4.47 10-10 10S2 17.53 2 12 6.47 2 12 2m3.59 5L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41z"/></svg></span> NPM Package for PR Creation</h3> <p><strong>Approach</strong>: Create external NPM package for PR creation functionality</p> <ul> <li><strong>Pros</strong>: Version management capabilities, external reusability across projects</li> <li><strong>Cons</strong>: External dependency, requires Node.js setup in workflows, additional complexity</li> <li><strong>Decision</strong>: Rejected due to complexity and external dependencies for internal use case</li> </ul> <h2 id=consequences-and-trade-offs>Consequences and Trade-offs</h2> <h3 id=positive-outcomes><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"/></svg></span> Positive Outcomes</h3> <h4 id=maintenance-and-consistency-excellence><strong>Maintenance and Consistency Excellence</strong></h4> <ul> <li>Eliminated 80+ lines of duplicated PR creation logic across multiple workflows</li> <li>Consistent AI enhancement ensuring identical behavior across all PR creation</li> <li>Single location for updates reducing coordination overhead and consistency risks</li> <li>Improved testing through independent action testing and validation</li> </ul> <h4 id=enhanced-development-experience><strong>Enhanced Development Experience</strong></h4> <ul> <li>Workflows simplified to focus on core business logic rather than PR creation details</li> <li>Better error handling through centralized error management and graceful degradation</li> <li>Enhanced flexibility enabling easy customization for specific use cases</li> <li>Clear interface documentation reducing learning curve for new team members</li> </ul> <h4 id=ai-integration-and-reliability><strong>AI Integration and Reliability</strong></h4> <ul> <li>Centralized AI enhancement logic ensuring consistent behavior across workflows</li> <li>Multiple LLM provider support with intelligent fallback handling</li> <li>Comprehensive error handling ensuring PR creation succeeds regardless of AI generation</li> <li>Performance optimization through shared diff size management and timeout handling</li> </ul> <h3 id=trade-offs-and-limitations><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 13H5v-2h14z"/></svg></span> Trade-offs and Limitations</h3> <h4 id=abstraction-and-complexity><strong>Abstraction and Complexity</strong></h4> <ul> <li>Additional abstraction layer between workflows and GitHub API</li> <li>Learning curve for team members to understand action interface and capabilities</li> <li>Composite action complexity with multiple steps and conditional logic</li> <li>Local development challenges for testing workflows using the action</li> </ul> <h4 id=branch-dependency-limitations><strong>Branch Dependency Limitations</strong></h4> <ul> <li>Critical limitation: actions can only be used by workflows running from same branch</li> <li>Sync workflow must embed logic directly due to running from fork_upstream branch</li> <li>Partial code duplication remains for workflows that cannot use the action</li> <li>Need to maintain consistency between action and embedded implementations</li> </ul> <h2 id=success-metrics>Success Metrics</h2> <h3 id=quantitative-indicators><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m16 11.78 4.24-7.33 1.73 1-5.23 9.05-6.51-3.75L5.46 19H22v2H2V3h2v14.54L9.5 8z"/></svg></span> Quantitative Indicators</h3> <ul> <li><strong>Code Duplication Reduction</strong>: 80%+ reduction in PR creation logic duplication (limited by branch constraints)</li> <li><strong>Maintenance Efficiency</strong>: Single location updates for most PR creation behavior</li> <li><strong>Consistency Achievement</strong>: 100% identical enhancement logic for workflows using action</li> <li><strong>Integration Success</strong>: New main-branch workflows easily adopt enhanced PR creation</li> </ul> <h3 id=qualitative-indicators><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M.41 13.41 6 19l1.41-1.42L1.83 12m20.41-6.42L11.66 16.17 7.5 12l-1.43 1.41L11.66 19l12-12M18 7l-1.41-1.42-6.35 6.35 1.42 1.41z"/></svg></span> Qualitative Indicators</h3> <ul> <li>Teams report improved workflow development experience and reduced complexity</li> <li>Clear understanding of when to use action versus embedded logic approach</li> <li>Effective AI enhancement providing value in PR descriptions and review process</li> <li>Successful maintenance of functionality while improving code organization</li> </ul> <h2 id=integration-points>Integration Points</h2> <h3 id=material-source-branch-template-and-workflow-integration>:material-source-branch Template and Workflow Integration</h3> <h4 id=template-update-propagation-per-adr-012><strong>Template Update Propagation</strong> (per <a href=../adr_012_template_updates/ >ADR-012</a>)</h4> <ul> <li>Template sync workflow leverages reusable action for consistent PR creation</li> <li>AI-enhanced descriptions improve template update visibility and review</li> <li>Standardized interface enables easy customization for template-specific requirements</li> </ul> <h4 id=ai-enhanced-development-per-adr-014><strong>AI-Enhanced Development</strong> (per <a href=../adr_014_ai_integration/ >ADR-014</a>)</h4> <ul> <li>Reusable action implements AI capabilities defined in AI integration strategy</li> <li>Multiple LLM provider support aligns with AI integration architecture</li> <li>Fallback handling ensures reliability regardless of AI service availability</li> </ul> <h3 id=material-quality-assurance-quality-and-testing-integration>:material-quality-assurance Quality and Testing Integration</h3> <h4 id=workflow-simplification_1><strong>Workflow Simplification</strong></h4> <ul> <li>Clear separation between business logic and PR creation concerns</li> <li>Enhanced testability through isolated action testing</li> <li>Improved debugging with centralized error handling and logging</li> </ul> <h2 id=related-decisions>Related Decisions</h2> <ul> <li><a href=../adr_011_template_sync/ >ADR-011</a>: Configuration-driven template synchronization benefits from consistent PR creation</li> <li><a href=../adr_012_template_updates/ >ADR-012</a>: Template update propagation uses this action for enhanced PR descriptions</li> <li><a href=../adr_014_ai_integration/ >ADR-014</a>: AI-enhanced development workflow implements AI capabilities used by this action</li> <li><a href=../adr_010_yaml_scripting/ >ADR-010</a>: YAML-safe scripting patterns applied in action implementation</li> </ul> <hr> <p><em>This reusable GitHub Actions pattern eliminates code duplication while providing consistent, AI-enhanced PR creation across workflows, with intelligent handling of branch limitations and comprehensive fallback mechanisms ensuring reliable operation.</em></p> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; Microsoft Corporation. </div> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["content.code.copy", "navigation.collapsible", "navigation.instant", "navigation.instant.preview", "navigation.tabs", "navigation.footer", "navigation.expand", "search.highlight", "search.share", "search.suggest"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../../assets/javascripts/bundle.56ea9cef.min.js></script> <script src=https://unpkg.com/mermaid@10.9.0/dist/mermaid.min.js></script> <script src=https://unpkg.com/tablesort@5.3.0/dist/tablesort.min.js></script> <script src=../../javascripts/tablesort.js></script> </body> </html>